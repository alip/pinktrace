<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Module: PinkTrace::Trace</title>

  <link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

  <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="module">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../__/__/__/ruby/init_c.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="../../../ruby/init.c">../../../ruby/init.c</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-attach">::attach</a></li>
          
          <li><a href="#method-c-cont">::cont</a></li>
          
          <li><a href="#method-c-detach">::detach</a></li>
          
          <li><a href="#method-c-geteventmsg">::geteventmsg</a></li>
          
          <li><a href="#method-c-kill">::kill</a></li>
          
          <li><a href="#method-c-me">::me</a></li>
          
          <li><a href="#method-c-resume">::resume</a></li>
          
          <li><a href="#method-c-setup">::setup</a></li>
          
          <li><a href="#method-c-singlestep">::singlestep</a></li>
          
          <li><a href="#method-c-syscall">::syscall</a></li>
          
          <li><a href="#method-c-syscall_entry">::syscall_entry</a></li>
          
          <li><a href="#method-c-syscall_exit">::syscall_exit</a></li>
          
          <li><a href="#method-c-sysemu">::sysemu</a></li>
          
          <li><a href="#method-c-sysemu_singlestep">::sysemu_singlestep</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../PinkTrace.html">PinkTrace</a></li>
        
          <li><a href="../PinkTrace/Bitness.html">PinkTrace::Bitness</a></li>
        
          <li><a href="../PinkTrace/Event.html">PinkTrace::Event</a></li>
        
          <li><a href="../PinkTrace/Socket.html">PinkTrace::Socket</a></li>
        
          <li><a href="../PinkTrace/Socket/Address.html">PinkTrace::Socket::Address</a></li>
        
          <li><a href="../PinkTrace/String.html">PinkTrace::String</a></li>
        
          <li><a href="../PinkTrace/StringArray.html">PinkTrace::StringArray</a></li>
        
          <li><a href="../PinkTrace/Syscall.html">PinkTrace::Syscall</a></li>
        
          <li><a href="../PinkTrace/Trace.html">PinkTrace::Trace</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="module">PinkTrace::Trace</h1>

    <div id="description" class="description">
      
<p>This class includes thin wrappers around the <tt>ptrace()</tt> system call.</p>

    </div><!-- description -->

    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="OPTION_ALL">OPTION_ALL</a></dt>
          
          <dd class="description"><p>Linux)</p>

<p>This constant represents all option flags bitwise OR’ed together.</p></dd>
          
        
          <dt><a name="OPTION_CLONE">OPTION_CLONE</a></dt>
          
          <dd class="description"><p><a href="Trace.html#method-c-geteventmsg">Trace.geteventmsg</a>.</p></dd>
          
        
          <dt><a name="OPTION_EXEC">OPTION_EXEC</a></dt>
          
          <dd class="description"><p><a href="Trace.html#method-c-setup">Trace.setup</a>, stop the child at the
next <tt>execve</tt>(2) call with (SIGTRAP | PTRACE_EVENT_EXEC &lt;&lt; 8).</p></dd>
          
        
          <dt><a name="OPTION_EXIT">OPTION_EXIT</a></dt>
          
          <dd class="description"><p><a href="Trace.html#method-c-geteventmsg">Trace.geteventmsg</a>.  This stop
will be done early during process exit when registers are still available,
allowing the tracer to see where the exit occured, whereas the normal exit
notification is done after the process is finished exiting. Even though
context is available, the tracer cannot prevent the exit from happening at
this point.</p></dd>
          
        
          <dt><a name="OPTION_FORK">OPTION_FORK</a></dt>
          
          <dd class="description"><p><a href="Trace.html#method-c-geteventmsg">Trace.geteventmsg</a>.</p></dd>
          
        
          <dt><a name="OPTION_SYSGOOD">OPTION_SYSGOOD</a></dt>
          
          <dd class="description"><p><a href="Trace.html#method-c-setup">Trace.setup</a>, when delivering
syscall traps, bit 7 is set in signal number (i.e., deliver (SIGTRAP |
0x80) This makes it easy for the tracer to tell the difference between
normal traps and those caused by a sycall. This option may not work on all
architectures.</p></dd>
          
        
          <dt><a name="OPTION_VFORK">OPTION_VFORK</a></dt>
          
          <dd class="description"><p><a href="Trace.html#method-c-geteventmsg">Trace.geteventmsg</a>.</p></dd>
          
        
          <dt><a name="OPTION_VFORK_DONE">OPTION_VFORK_DONE</a></dt>
          
          <dd class="description"><p><a href="Trace.html#method-c-setup">Trace.setup</a>, stop the child at the
completion of the next vfork(2) call with (SIGTRAP |
PTRACE_EVENT_VFORK_DONE &lt;&lt; 8).</p></dd>
          
        
        </dl>
      </div>
      

      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="attach-method" class="method-detail ">
          <a name="method-c-attach"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">PinkTrace::Trace.attach(pid) &rarr; nil</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Attaches to the process specified in pid, making it a traced “child” of the
calling process; the behaviour of the child is as if it had done a <a
href="Trace.html#method-c-me">PinkTrace::Trace.me</a>. The child is sent a
SIGSTOP, but will not necessarily have stopped by the completion of this
call; use Process.waitpid to wait for the child to stop.</p>
            

            
            <div class="method-source-code" id="attach-source">
<pre>
VALUE
pinkrb_trace_attach(VALUE mod, VALUE vpid)
{
	pid_t pid;

	pid = NUM2PIDT(vpid);
	if (!pink_trace_attach(pid))
		rb_sys_fail(&quot;pink_trace_attach()&quot;);

	return Qnil;
}</pre>
            </div><!-- attach-source -->
            
          </div>

          

          
        </div><!-- attach-method -->

      
        <div id="cont-method" class="method-detail ">
          <a name="method-c-cont"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">PinkTrace::Trace.cont(pid, [[sig=0], [addr=1]]) &rarr; nil</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Restarts the stopped child process.</p>

<p>If <tt>sig</tt> argument is non-zero and not SIGSTOP, it is interpreted as
the signal to be delivered to the child; otherwise, no signal is delivered.
Thus, for example, the parent can control whether a signal sent to the
child is delivered or not.</p>

<p>On FreeBSD <tt>addr</tt> is an address specifying the place where execution
is to be resumed (a new value for the program counter), or 1 to indicate
that execution is to pick up where it left off. On Linux, this argument is
not used.</p>
            

            
            <div class="method-source-code" id="cont-source">
<pre>
VALUE
pinkrb_trace_cont(int argc, VALUE *argv, VALUE mod)
{
	pid_t pid;
	long sig, addr;
	VALUE vpid, vsig, vaddr;

	switch (rb_scan_args(argc, argv, &quot;12&quot;, &amp;vpid, &amp;vsig, &amp;vaddr)) {
	case 1:
		addr = 1;
		sig = 0;
		break;
	case 2:
		addr = 1;
		sig = NUM2LONG(vsig);
		break;
	case 3:
		addr = NUM2LONG(vaddr);
		sig = NUM2LONG(vsig);
		break;
	default:
		abort();
	}
	pid = NUM2PIDT(vpid);

	if (!pink_trace_cont(pid, sig, (char *)addr))
		rb_sys_fail(&quot;pink_trace_cont()&quot;);

	return Qnil;
}</pre>
            </div><!-- cont-source -->
            
          </div>

          

          
        </div><!-- cont-method -->

      
        <div id="detach-method" class="method-detail ">
          <a name="method-c-detach"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">PinkTrace::Trace.detach(pid, [sig=0]) &rarr; nil</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Restarts the stopped child as for <a
href="Trace.html#method-c-cont">PinkTrace::Trace.cont</a>, but first
detaches from the process, undoing the reparenting effect of <a
href="Trace.html#method-c-attach">PinkTrace::Trace.attach</a>.</p>

<p>The <tt>sig</tt> argument is treated as the same way as the <tt>sig</tt>
argument of <a href="Trace.html#method-c-cont">PinkTrace::Trace.cont</a>.</p>
            

            
            <div class="method-source-code" id="detach-source">
<pre>
VALUE
pinkrb_trace_detach(int argc, VALUE *argv, VALUE mod)
{
	pid_t pid;
	long sig;
	VALUE vpid, vsig;

	switch (rb_scan_args(argc, argv, &quot;11&quot;, &amp;vpid, &amp;vsig)) {
	case 1:
		sig = 0;
		break;
	case 2:
		sig = NUM2LONG(vsig);
		break;
	default:
		abort();
	}
	pid = NUM2PIDT(vpid);

	if (!pink_trace_detach(pid, sig))
		rb_sys_fail(&quot;pink_trace_detach()&quot;);

	return Qnil;
}</pre>
            </div><!-- detach-source -->
            
          </div>

          

          
        </div><!-- detach-method -->

      
        <div id="geteventmsg-method" class="method-detail ">
          <a name="method-c-geteventmsg"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">PinkTrace::Trace.geteventmsg(pid) &rarr; fixnum</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Returns a message (as a <tt>fixnum</tt>) about the trace event that just
happened, For <b>EXIT</b> event this is the child’s exit status. For
<b>FORK</b>, <b>VFORK</b>, <b>CLONE</b> and <b>VFORK_DONE</b> events this
is the process ID of the new process.</p>

<p>Availability: Linux</p>
            

            
            <div class="method-source-code" id="geteventmsg-source">
<pre>
VALUE
pinkrb_trace_geteventmsg(VALUE mod, VALUE vpid)
{
#ifdef PINKTRACE_LINUX
	pid_t pid;
	unsigned long data;

	pid = NUM2PIDT(vpid);
	if (!pink_trace_geteventmsg(pid, &amp;data))
		rb_sys_fail(&quot;pink_trace_geteventmsg()&quot;);

	return ULONG2NUM(data);
#else
	rb_raise(rb_eNotImpError, &quot;Not implemented&quot;);
#endif
}</pre>
            </div><!-- geteventmsg-source -->
            
          </div>

          

          
        </div><!-- geteventmsg-method -->

      
        <div id="kill-method" class="method-detail ">
          <a name="method-c-kill"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">PinkTrace::Trace.kill(pid) &rarr; nil</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Kills the traced child process with SIGKILL.</p>
            

            
            <div class="method-source-code" id="kill-source">
<pre>
VALUE
pinkrb_trace_kill(VALUE mod, VALUE vpid)
{
	pid_t pid;

	pid = NUM2PIDT(vpid);
	if (!pink_trace_kill(pid))
		rb_sys_fail(&quot;pink_trace_kill()&quot;);

	return Qnil;
}</pre>
            </div><!-- kill-source -->
            
          </div>

          

          
        </div><!-- kill-method -->

      
        <div id="me-method" class="method-detail ">
          <a name="method-c-me"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">PinkTrace::Trace.me() &rarr; nil</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Indicates that this process is to be traced by its parent. Any signal
(except SIGKILL) delivered to this process will cause it to stop and its
parent to be notified via Process.wait. Also, all subsequent calls to
execve(2) by this process will cause a SIGTRAP to be sent to it, giving the
parent a chance to gain control before the new program begins execution.</p>

<p>Note: This function is used only by the child process; the rest are used
only by the parent.</p>
            

            
            <div class="method-source-code" id="me-source">
<pre>
VALUE
pinkrb_trace_me(VALUE mod)
{
	if (!pink_trace_me())
		rb_sys_fail(&quot;pink_trace_me()&quot;);

	return Qnil;
}</pre>
            </div><!-- me-source -->
            
          </div>

          

          
        </div><!-- me-method -->

      
        <div id="resume-method" class="method-detail ">
          <a name="method-c-resume"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">PinkTrace::Trace.resume(pid, [sig=0]) &rarr; nil</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Resumes the stopped child process. This is equivalent to <a
href="Trace.html#method-c-cont">PinkTrace::Trace.cont</a>(pid, sig, 1)</p>

<p>If <tt>sig</tt> argument is non-zero and not SIGSTOP, it is interpreted as
the signal to be delivered to the child; otherwise, no signal is delivered.
Thus, for example, the parent can control whether a signal sent to the
child is delivered or not.</p>
            

            
            <div class="method-source-code" id="resume-source">
<pre>
VALUE
pinkrb_trace_resume(int argc, VALUE *argv, VALUE mod)
{
	pid_t pid;
	long sig;
	VALUE vpid, vsig;

	switch (rb_scan_args(argc, argv, &quot;11&quot;, &amp;vpid, &amp;vsig)) {
	case 1:
		sig = 0;
		break;
	case 2:
		sig = NUM2LONG(vsig);
		break;
	default:
		abort();
	}
	pid = NUM2PIDT(vpid);

	if (!pink_trace_resume(pid, sig))
		rb_sys_fail(&quot;pink_trace_resume()&quot;);

	return Qnil;
}</pre>
            </div><!-- resume-source -->
            
          </div>

          

          
        </div><!-- resume-method -->

      
        <div id="setup-method" class="method-detail ">
          <a name="method-c-setup"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">PinkTrace::Trace.setup(pid, [options=0]) &rarr; nil</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Sets the tracing options.</p>

<p>Availability: Linux</p>
            

            
            <div class="method-source-code" id="setup-source">
<pre>
VALUE
pinkrb_trace_setup(int argc, VALUE *argv, VALUE mod)
{
#ifdef PINKTRACE_LINUX
	pid_t pid;
	int opts;
	VALUE vpid, vopts;

	switch (rb_scan_args(argc, argv, &quot;11&quot;, &amp;vpid, &amp;vopts)) {
	case 1:
		opts = 0;
		break;
	case 2:
		opts = NUM2INT(vopts);
		break;
	default:
		abort();
	}
	pid = NUM2PIDT(vpid);

	if (!pink_trace_setup(pid, opts))
		rb_sys_fail(&quot;pink_trace_setup()&quot;);

	return Qnil;
#else
	rb_raise(rb_eNotImpError, &quot;Not implemented&quot;);
#endif
}</pre>
            </div><!-- setup-source -->
            
          </div>

          

          
        </div><!-- setup-method -->

      
        <div id="singlestep-method" class="method-detail ">
          <a name="method-c-singlestep"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">PinkTrace::Trace.singlestep(pid, [sig=0]) &rarr; nil</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Restarts the stopped child process and arranges it to be stopped after
execution of a single instruction.</p>

<p>The <tt>sig</tt> argument is treated as the same way as the <tt>sig</tt>
argument of <a href="Trace.html#method-c-cont">PinkTrace::Trace.cont</a>.</p>
            

            
            <div class="method-source-code" id="singlestep-source">
<pre>
VALUE
pinkrb_trace_singlestep(int argc, VALUE *argv, VALUE mod)
{
	pid_t pid;
	long sig;
	VALUE vpid, vsig;

	switch (rb_scan_args(argc, argv, &quot;11&quot;, &amp;vpid, &amp;vsig)) {
	case 1:
		sig = 0;
		break;
	case 2:
		sig = NUM2LONG(vsig);
		break;
	default:
		abort();
	}
	pid = NUM2PIDT(vpid);

	if (!pink_trace_singlestep(pid, sig))
		rb_sys_fail(&quot;pink_trace_singlestep()&quot;);

	return Qnil;
}</pre>
            </div><!-- singlestep-source -->
            
          </div>

          

          
        </div><!-- singlestep-method -->

      
        <div id="syscall-method" class="method-detail ">
          <a name="method-c-syscall"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">PinkTrace::Trace.syscall(pid, [sig=0]) &rarr; nil</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Restarts the stopped child process and arranges it to be stopped after the
entry or exit of the next system call.</p>

<p>The <tt>sig</tt> argument is treated as the same way as the <tt>sig</tt>
argument of <a href="Trace.html#method-c-cont">PinkTrace::Trace.cont</a>.</p>
            

            
            <div class="method-source-code" id="syscall-source">
<pre>
VALUE
pinkrb_trace_syscall(int argc, VALUE *argv, VALUE mod)
{
	pid_t pid;
	long sig;
	VALUE vpid, vsig;

	switch (rb_scan_args(argc, argv, &quot;11&quot;, &amp;vpid, &amp;vsig)) {
	case 1:
		sig = 0;
		break;
	case 2:
		sig = NUM2LONG(vsig);
		break;
	default:
		abort();
	}
	pid = NUM2PIDT(vpid);

	if (!pink_trace_syscall(pid, sig))
		rb_sys_fail(&quot;pink_trace_syscall()&quot;);

	return Qnil;
}</pre>
            </div><!-- syscall-source -->
            
          </div>

          

          
        </div><!-- syscall-method -->

      
        <div id="syscall_entry-method" class="method-detail ">
          <a name="method-c-syscall_entry"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">PinkTrace::Trace.syscall_entry(pid, [sig=0]) &rarr; nil</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Restarts the stopped child process and arranges it to be stopped after the
entry of next system call.</p>

<p>The <tt>sig</tt> argument is treated as the same way as the <tt>sig</tt>
argument of <a href="Trace.html#method-c-cont">PinkTrace::Trace.cont</a>.</p>

<p>Availability: FreeBSD</p>
            

            
            <div class="method-source-code" id="syscall_entry-source">
<pre>
VALUE
pinkrb_trace_syscall_entry(int argc, VALUE *argv, VALUE mod)
{
#ifdef PINKTRACE_FREEBSD
	pid_t pid;
	long sig;
	VALUE vpid, vsig;

	switch (rb_scan_args(argc, argv, &quot;11&quot;, &amp;vpid, &amp;vsig)) {
	case 1:
		sig = 0;
		break;
	case 2:
		sig = NUM2LONG(vsig);
		break;
	default:
		abort();
	}
	pid = NUM2PIDT(vpid);

	if (!pink_trace_syscall_entry(pid, sig))
		rb_sys_fail(&quot;pink_trace_syscall_entry()&quot;);

	return Qnil;
#else
	rb_raise(rb_eNotImpError, &quot;Not implemented&quot;);
#endif
}</pre>
            </div><!-- syscall_entry-source -->
            
          </div>

          

          
        </div><!-- syscall_entry-method -->

      
        <div id="syscall_exit-method" class="method-detail ">
          <a name="method-c-syscall_exit"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">PinkTrace::Trace.syscall_exit(pid, [sig=0]) &rarr; nil</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Restarts the stopped child process and arranges it to be stopped after the
exit of next system call.</p>

<p>The <tt>sig</tt> argument is treated as the same way as the <tt>sig</tt>
argument of <a href="Trace.html#method-c-cont">PinkTrace::Trace.cont</a>.</p>

<p>Availability: FreeBSD</p>
            

            
            <div class="method-source-code" id="syscall_exit-source">
<pre>
VALUE
pinkrb_trace_syscall_exit(int argc, VALUE *argv, VALUE mod)
{
#ifdef PINKTRACE_FREEBSD
	pid_t pid;
	long sig;
	VALUE vpid, vsig;

	switch (rb_scan_args(argc, argv, &quot;11&quot;, &amp;vpid, &amp;vsig)) {
	case 1:
		sig = 0;
		break;
	case 2:
		sig = NUM2LONG(vsig);
		break;
	default:
		abort();
	}
	pid = NUM2PIDT(vpid);

	if (!pink_trace_syscall_exit(pid, sig))
		rb_sys_fail(&quot;pink_trace_syscall_exit()&quot;);

	return Qnil;
#else
	rb_raise(rb_eNotImpError, &quot;Not implemented&quot;);
#endif /* defined(PINKTRACE_FREEBSD) */
}</pre>
            </div><!-- syscall_exit-source -->
            
          </div>

          

          
        </div><!-- syscall_exit-method -->

      
        <div id="sysemu-method" class="method-detail ">
          <a name="method-c-sysemu"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">PinkTrace::Trace.sysemu(pid, [sig=0]) &rarr; nil</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Restarts the stopped child process and arranges it to be stopped after the
entry of the next system call which will <b>not</b> be executed.</p>

<p>The <tt>sig</tt> argument is treated as the same way as the <tt>sig</tt>
argument of <a href="Trace.html#method-c-cont">PinkTrace::Trace.cont</a>.</p>

<p>Availability: Linux</p>
            

            
            <div class="method-source-code" id="sysemu-source">
<pre>
VALUE
pinkrb_trace_sysemu(int argc, VALUE *argv, VALUE mod)
{
#ifdef PINKTRACE_LINUX
	pid_t pid;
	long sig;
	VALUE vpid, vsig;

	switch (rb_scan_args(argc, argv, &quot;11&quot;, &amp;vpid, &amp;vsig)) {
	case 1:
		sig = 0;
		break;
	case 2:
		sig = NUM2LONG(vsig);
		break;
	default:
		abort();
	}
	pid = NUM2PIDT(vpid);

	if (!pink_trace_sysemu(pid, sig))
		rb_sys_fail(&quot;pink_trace_sysemu()&quot;);

	return Qnil;
#else
	rb_raise(rb_eNotImpError, &quot;Not implemented&quot;);
#endif
}</pre>
            </div><!-- sysemu-source -->
            
          </div>

          

          
        </div><!-- sysemu-method -->

      
        <div id="sysemu_singlestep-method" class="method-detail ">
          <a name="method-c-sysemu_singlestep"></a>

          
          
          <div class="method-heading">
            <span class="method-callseq">PinkTrace::Trace.sysemu_singlestep(pid, [sig=0]) &rarr; nil</span>
            
            <span class="method-click-advice">click to toggle source</span>
            
          </div>
          
          

          <div class="method-description">
            
            <p>Restarts the stopped child process <a
href="Trace.html#method-c-sysemu">PinkTrace::Trace.sysemu</a> but also
singlesteps if not a system call.</p>

<p>The <tt>sig</tt> argument is treated as the same way as the <tt>sig</tt>
argument of <a href="Trace.html#method-c-cont">PinkTrace::Trace.cont</a>.</p>

<p>Availability: Linux</p>
            

            
            <div class="method-source-code" id="sysemu_singlestep-source">
<pre>
VALUE
pinkrb_trace_sysemu_singlestep(int argc, VALUE *argv, VALUE mod)
{
#ifdef PINKTRACE_LINUX
	pid_t pid;
	long sig;
	VALUE vpid, vsig;

	switch (rb_scan_args(argc, argv, &quot;11&quot;, &amp;vpid, &amp;vsig)) {
	case 1:
		sig = 0;
		break;
	case 2:
		sig = NUM2LONG(vsig);
		break;
	default:
		abort();
	}
	pid = NUM2PIDT(vpid);

	if (!pink_trace_sysemu_singlestep(pid, sig))
		rb_sys_fail(&quot;pink_trace_sysemu_singlestep()&quot;);

	return Qnil;
#else
	rb_raise(rb_eNotImpError, &quot;Not implemented&quot;);
#endif
}</pre>
            </div><!-- sysemu_singlestep-source -->
            
          </div>

          

          
        </div><!-- sysemu_singlestep-method -->

      
      </div><!-- public-class-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

