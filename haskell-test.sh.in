#!/bin/sh
# vim: set sw=4 et sts=4 tw=80 :

die() {
    echo "$@" >&2
    exit 1
}

edo() {
    echo "$@"
    "$@" || die "$@ failed"
}

TOP_BUILDDIR="#TOP_BUILDDIR#"
PC_SLOT="#PINKTRACE_PC_SLOT#"
RUNHASKELL_OPTS="
    -i${TOP_BUILDDIR}/dist/build
    -i${TOP_BUILDDIR}/haskell
    -L${TOP_BUILDDIR}/src/.libs -lpinktrace_${PC_SLOT}"

edo runhaskell ${RUNHASKELL_OPTS} "${TOP_BUILDDIR}"/haskell/tests/TestBitness.lhs
