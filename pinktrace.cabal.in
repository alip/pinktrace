name:          pinktrace
version:       #VERSION#
synopsis:      Haskell bindings to Pink's Tracing Library
homepage:      http://dev.exherbo.org/~alip/pinktrace
license:       BSD3
author:        Ali Polatel
maintainer:    alip@exherbo.org
category:      System
build-type:    Custom
cabal-version: >=1.2

flag example
  description: build example programs
  default: False

flag test
  description: build test programs
  default: False

library
  hs-source-dirs: haskell
  exposed-modules:
    System.PinkTrace
    System.PinkTrace.Bitness
    System.PinkTrace.Event
    System.PinkTrace.Socket
    System.PinkTrace.String
    System.PinkTrace.SystemCall
    System.PinkTrace.Trace
  c-sources:
    haskell/cbits/HsWaitPid.c
    haskell/cbits/HsSocket.c
  build-depends: base, network, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include

executable pink-about
  main-is: pink-about.hs
  hs-source-dirs: haskell, examples/haskell
  other-modules:
    System.PinkTrace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !flag(example)
    buildable: False

executable pink-fork-freebsd
  main-is: pink-fork-freebsd.hs
  hs-source-dirs: haskell, examples/haskell
  other-modules:
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(freebsd)
    buildable: False
  if !flag(example)
    buildable: False

executable pink-fork-linux
  main-is: pink-fork-linux.hs
  hs-source-dirs: haskell, examples/haskell
  other-modules:
    System.PinkTrace.Event
    System.PinkTrace.Trace
  c-sources:
    haskell/cbits/HsWaitPid.c
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(linux)
    buildable: False
  if !flag(example)
    buildable: False

executable test01TraceMe
  main-is: test01TraceMe.lhs
  hs-source-dirs: haskell, haskell/tests
  other-modules:
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !flag(test)
    buildable: False

executable test02TraceSignal
  main-is: test02TraceSignal.lhs
  hs-source-dirs: haskell, haskell/tests
  other-modules:
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !flag(test)
    buildable: False

executable test03Bitness
  main-is: test03Bitness.lhs
  hs-source-dirs: haskell, haskell/tests
  other-modules:
    System.PinkTrace.Bitness
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !flag(test)
    buildable: False

executable testFreeBSD01TraceCont
  main-is: test01TraceCont.lhs
  hs-source-dirs: haskell, haskell/tests/freebsd
  other-modules:
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(freebsd)
    buildable: False
  if !flag(test)
    buildable: False

executable testFreeBSD02TraceContSignal
  main-is: test02TraceContSignal.lhs
  hs-source-dirs: haskell, haskell/tests/freebsd
  other-modules:
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(freebsd)
    buildable: False
  if !flag(test)
    buildable: False

executable testFreeBSD03TraceKill
  main-is: test03TraceKill.lhs
  hs-source-dirs: haskell, haskell/tests/freebsd
  other-modules:
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(freebsd)
    buildable: False
  if !flag(test)
    buildable: False

executable testFreeBSD04TraceSingleStep
  main-is: test04TraceSingleStep.lhs
  hs-source-dirs: haskell, haskell/tests/freebsd
  other-modules:
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(freebsd)
    buildable: False
  if !flag(test)
    buildable: False

executable testFreeBSD05TraceSingleStepSignal
  main-is: test05TraceSingleStepSignal.lhs
  hs-source-dirs: haskell, haskell/tests/freebsd
  other-modules:
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(freebsd)
    buildable: False
  if !flag(test)
    buildable: False

executable testFreeBSD06TraceSystemCall
  main-is: test06TraceSystemCall.lhs
  hs-source-dirs: haskell, haskell/tests/freebsd
  other-modules:
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(freebsd)
    buildable: False
  if !flag(test)
    buildable: False

executable testFreeBSD07TraceSystemCallSignal
  main-is: test07TraceSystemCallSignal.lhs
  hs-source-dirs: haskell, haskell/tests/freebsd
  other-modules:
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(freebsd)
    buildable: False
  if !flag(test)
    buildable: False

executable testFreeBSD08TraceSystemCallEntry
  main-is: test08TraceSystemCallEntry.lhs
  hs-source-dirs: haskell, haskell/tests/freebsd
  other-modules:
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(freebsd)
    buildable: False
  if !flag(test)
    buildable: False

executable testFreeBSD09TraceSystemCallEntrySignal
  main-is: test09TraceSystemCallEntrySignal.lhs
  hs-source-dirs: haskell, haskell/tests/freebsd
  other-modules:
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(freebsd)
    buildable: False
  if !flag(test)
    buildable: False

executable testFreeBSD10TraceSystemCallExit
  main-is: test10TraceSystemCallExit.lhs
  hs-source-dirs: haskell, haskell/tests/freebsd
  other-modules:
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(freebsd)
    buildable: False
  if !flag(test)
    buildable: False

executable testFreeBSD11TraceSystemCallExitSignal
  main-is: test11TraceSystemCallExitSignal.lhs
  hs-source-dirs: haskell, haskell/tests/freebsd
  other-modules:
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(freebsd)
    buildable: False
  if !flag(test)
    buildable: False

executable testFreeBSD12SystemCallGetNumber
  main-is: test12SystemCallGetNumber.lhs
  hs-source-dirs: haskell, haskell/tests/freebsd
  other-modules:
    System.PinkTrace.Bitness
    System.PinkTrace.SystemCall
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(freebsd)
    buildable: False
  if !flag(test)
    buildable: False

executable testFreeBSD13SystemCallSetNumber
  main-is: test13SystemCallSetNumber.lhs
  hs-source-dirs: haskell, haskell/tests/freebsd
  other-modules:
    System.PinkTrace.Bitness
    System.PinkTrace.SystemCall
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(freebsd)
    buildable: False
  if !flag(test)
    buildable: False

executable testFreeBSD14SystemCallGetReturn
  main-is: test14SystemCallGetReturn.lhs
  hs-source-dirs: haskell, haskell/tests/freebsd
  other-modules:
    System.PinkTrace.Bitness
    System.PinkTrace.SystemCall
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(freebsd)
    buildable: False
  if !flag(test)
    buildable: False

executable testFreeBSD15SystemCallSetReturn
  main-is: test15SystemCallSetReturn.lhs
  hs-source-dirs: haskell, haskell/tests/freebsd
  other-modules:
    System.PinkTrace.Bitness
    System.PinkTrace.SystemCall
    System.PinkTrace.Trace
  build-depends: base, unix
  build-tools: hsc2hs
  cc-options: -std=c99 #PINKTRACE_CFLAGS#
  ghc-options: -Wall
  extra-libraries: pinktrace_#PINKTRACE_PC_SLOT#
  extra-lib-dirs: #TOP_BUILDDIR#/src/.libs
  include-dirs: #TOP_SRCDIR#/include
  include-dirs: #TOP_SRCDIR#/haskell/include
  if !os(freebsd)
    buildable: False
  if !flag(test)
    buildable: False
